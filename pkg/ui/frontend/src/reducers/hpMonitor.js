import * as actions from '../actions/hpMonitorActions';

const initialState = {
    filter: '',
    filterType: {
        "Running": true,
        "Failed": true,
        "Succeeded": true,
    },
    jobsList: [
        {
            id: "1",
            status: "Succeeded",
        },
        {
            id: "2",
            status: "Failed",
        }
    ],
    filteredJobsList: [
        {
            id: "1",
            status: "Succeeded",
            name: "random-example",
        },
        {
            id: "2",
            status: "Failed",
            name: "hyperband-example",
        }
    ],
    jobData: 
    [['WorkerID', 'Random', 'accuracy', 'validation-accuracy', '--lr', 'num_layers'], [40787, 0.17443685638112205, 0.5175371215822423, 0.20398002258631098, 0.3487582934213036, 0.11979154744372522], [81319, 0.26592356965747477, 0.5186856576798762, 0.17478719792720376, 0.5318752743160138, 0.8816591745675406], [60725, 0.9555579648846767, 0.21808204104552475, 0.44396284414834786, 0.7807720651097895, 0.19636223551484533], [8812, 0.9751954097331801, 0.3505857148999104, 0.5663254037672882, 0.32555784186930026, 0.7253016826612628], [34545, 0.2929328595896482, 0.9899987401039533, 0.9563275939925544, 0.26949723491407196, 0.949126469996623], [56780, 0.4277892604026956, 0.614239114616538, 0.5713903241742685, 0.4618793051783173, 0.23967533318391665], [66349, 0.9805427829770982, 0.7128761639767993, 0.37934426275850586, 0.4532155172708251, 0.3905091904871816], [34874, 0.2483901243426201, 0.2236629550417527, 0.7431284275936351, 0.1296503628014698, 0.5619124679998043], [2322, 0.87765630524443, 0.7574583861467235, 0.37963885870824154, 0.07927125316512518, 0.762756075083654], [2153, 0.32702331002857143, 0.7701443692670878, 0.26126700487363375, 0.2504461429851512, 0.22396745085923664], [39102, 0.47191652058167377, 0.6268114016296177, 0.8722416186251614, 0.5286733834498959, 0.9185218773201839], [91697, 0.3852192405984164, 0.03907098337128845, 0.564299592608865, 0.7018594169538794, 0.2819090186030505], [87333, 0.37290762847333636, 0.0529144315741904, 0.5946907865559079, 0.5336252797635582, 0.0007561245287267537], [96961, 0.7614500140932329, 0.41949264703835365, 0.05422260203512297, 0.3094610353908136, 0.2605103070253775]],
    workerData:
    [['name', 'x', 'y'], ['validation-accuracy', '2013-09-20 13:00:00', 1.0], ['accuracy', '2013-09-20 13:01:00', 2.0], ['accuracy', '2013-09-20 13:02:00', 4.0], ['validation-accuracy', '2013-09-20 13:03:00', 8.0], ['accuracy', '2013-09-20 13:04:00', 16.0], ['validation-accuracy', '2013-09-20 13:05:00', 32.0], ['accuracy', '2013-09-20 13:06:00', 64.0], ['validation-accuracy', '2013-09-20 13:07:00', 128.0], ['validation-accuracy', '2013-09-20 13:08:00', 256.0], ['accuracy', '2013-09-20 13:09:00', 512.0], ['validation-accuracy', '2013-09-20 13:10:00', 1024.0], ['accuracy', '2013-09-20 13:11:00', 2048.0], ['validation-accuracy', '2013-09-20 13:12:00', 4096.0], ['validation-accuracy', '2013-09-20 13:13:00', 8192.0], ['validation-accuracy', '2013-09-20 13:14:00', 16384.0], ['validation-accuracy', '2013-09-20 13:15:00', 32768.0], ['accuracy', '2013-09-20 13:16:00', 65536.0], ['validation-accuracy', '2013-09-20 13:17:00', 131072.0], ['accuracy', '2013-09-20 13:18:00', 262144.0], ['accuracy', '2013-09-20 13:19:00', 524288.0], ['accuracy', '2013-09-20 13:20:00', 1048576.0], ['accuracy', '2013-09-20 13:21:00', 2097152.0], ['accuracy', '2013-09-20 13:22:00', 4194304.0], ['validation-accuracy', '2013-09-20 13:23:00', 8388608.0], ['validation-accuracy', '2013-09-20 13:24:00', 16777216.0], ['validation-accuracy', '2013-09-20 13:25:00', 33554432.0], ['validation-accuracy', '2013-09-20 13:26:00', 67108864.0], ['accuracy', '2013-09-20 13:27:00', 134217728.0], ['validation-accuracy', '2013-09-20 13:28:00', 268435456.0], ['accuracy', '2013-09-20 13:29:00', 536870912.0], ['accuracy', '2013-09-20 13:30:00', 1073741824.0], ['validation-accuracy', '2013-09-20 13:31:00', 2147483648.0], ['validation-accuracy', '2013-09-20 13:32:00', 4294967296.0], ['accuracy', '2013-09-20 13:33:00', 8589934592.0], ['validation-accuracy', '2013-09-20 13:34:00', 17179869184.0], ['validation-accuracy', '2013-09-20 13:35:00', 34359738368.0], ['accuracy', '2013-09-20 13:36:00', 68719476736.0], ['accuracy', '2013-09-20 13:37:00', 137438953472.0], ['validation-accuracy', '2013-09-20 13:38:00', 274877906944.0], ['validation-accuracy', '2013-09-20 13:39:00', 549755813888.0], ['validation-accuracy', '2013-09-20 13:40:00', 1099511627776.0], ['validation-accuracy', '2013-09-20 13:41:00', 2199023255552.0], ['accuracy', '2013-09-20 13:42:00', 4398046511104.0], ['accuracy', '2013-09-20 13:43:00', 8796093022208.0], ['validation-accuracy', '2013-09-20 13:44:00', 17592186044416.0], ['accuracy', '2013-09-20 13:45:00', 35184372088832.0], ['accuracy', '2013-09-20 13:46:00', 70368744177664.0], ['accuracy', '2013-09-20 13:47:00', 140737488355328.0], ['accuracy', '2013-09-20 13:48:00', 281474976710656.0], ['validation-accuracy', '2013-09-20 13:49:00', 562949953421312.0], ['accuracy', '2013-09-20 13:50:00', 1125899906842624.0], ['accuracy', '2013-09-20 13:51:00', 2251799813685248.0], ['accuracy', '2013-09-20 13:52:00', 4503599627370496.0], ['accuracy', '2013-09-20 13:53:00', 9007199254740992.0], ['validation-accuracy', '2013-09-20 13:54:00', 1.8014398509481984e+16], ['validation-accuracy', '2013-09-20 13:55:00', 3.602879701896397e+16], ['validation-accuracy', '2013-09-20 13:56:00', 7.205759403792794e+16], ['accuracy', '2013-09-20 13:57:00', 1.4411518807585587e+17], ['accuracy', '2013-09-20 13:58:00', 2.8823037615171174e+17], ['validation-accuracy', '2013-09-20 13:59:00', 5.764607523034235e+17], ['validation-accuracy', '2013-09-20 14:00:00', 1.152921504606847e+18], ['validation-accuracy', '2013-09-20 14:01:00', 2.305843009213694e+18], ['accuracy', '2013-09-20 14:02:00', 4.611686018427388e+18], ['validation-accuracy', '2013-09-20 14:03:00', 9.223372036854776e+18], ['accuracy', '2013-09-20 14:04:00', 1.8446744073709552e+19], ['validation-accuracy', '2013-09-20 14:05:00', 3.6893488147419103e+19], ['validation-accuracy', '2013-09-20 14:06:00', 7.378697629483821e+19], ['validation-accuracy', '2013-09-20 14:07:00', 1.4757395258967641e+20], ['validation-accuracy', '2013-09-20 14:08:00', 2.9514790517935283e+20], ['accuracy', '2013-09-20 14:09:00', 5.902958103587057e+20], ['accuracy', '2013-09-20 14:10:00', 1.1805916207174113e+21], ['validation-accuracy', '2013-09-20 14:11:00', 2.3611832414348226e+21], ['accuracy', '2013-09-20 14:12:00', 4.722366482869645e+21], ['accuracy', '2013-09-20 14:13:00', 9.44473296573929e+21], ['accuracy', '2013-09-20 14:14:00', 1.888946593147858e+22], ['validation-accuracy', '2013-09-20 14:15:00', 3.777893186295716e+22], ['accuracy', '2013-09-20 14:16:00', 7.555786372591432e+22], ['validation-accuracy', '2013-09-20 14:17:00', 1.5111572745182865e+23], ['validation-accuracy', '2013-09-20 14:18:00', 3.022314549036573e+23], ['accuracy', '2013-09-20 14:19:00', 6.044629098073146e+23], ['validation-accuracy', '2013-09-20 14:20:00', 1.2089258196146292e+24], ['accuracy', '2013-09-20 14:21:00', 2.4178516392292583e+24], ['accuracy', '2013-09-20 14:22:00', 4.835703278458517e+24], ['accuracy', '2013-09-20 14:23:00', 9.671406556917033e+24], ['validation-accuracy', '2013-09-20 14:24:00', 1.9342813113834067e+25], ['accuracy', '2013-09-20 14:25:00', 3.8685626227668134e+25], ['accuracy', '2013-09-20 14:26:00', 7.737125245533627e+25], ['validation-accuracy', '2013-09-20 14:27:00', 1.5474250491067253e+26], ['accuracy', '2013-09-20 14:28:00', 3.094850098213451e+26], ['validation-accuracy', '2013-09-20 14:29:00', 6.189700196426902e+26], ['accuracy', '2013-09-20 14:30:00', 1.2379400392853803e+27], ['validation-accuracy', '2013-09-20 14:31:00', 2.4758800785707605e+27], ['accuracy', '2013-09-20 14:32:00', 4.951760157141521e+27], ['accuracy', '2013-09-20 14:33:00', 9.903520314283042e+27], ['accuracy', '2013-09-20 14:34:00', 1.9807040628566084e+28], ['accuracy', '2013-09-20 14:35:00', 3.961408125713217e+28], ['accuracy', '2013-09-20 14:36:00', 7.922816251426434e+28], ['accuracy', '2013-09-20 14:37:00', 1.5845632502852868e+29], ['validation-accuracy', '2013-09-20 14:38:00', 3.1691265005705735e+29], ['accuracy', '2013-09-20 14:39:00', 6.338253001141147e+29], ['accuracy', '2013-09-20 14:40:00', 1.2676506002282294e+30], ['validation-accuracy', '2013-09-20 14:41:00', 2.535301200456459e+30], ['validation-accuracy', '2013-09-20 14:42:00', 5.070602400912918e+30], ['accuracy', '2013-09-20 14:43:00', 1.0141204801825835e+31], ['accuracy', '2013-09-20 14:44:00', 2.028240960365167e+31], ['validation-accuracy', '2013-09-20 14:45:00', 4.056481920730334e+31], ['accuracy', '2013-09-20 14:46:00', 8.112963841460668e+31], ['accuracy', '2013-09-20 14:47:00', 1.6225927682921336e+32], ['accuracy', '2013-09-20 14:48:00', 3.2451855365842673e+32], ['accuracy', '2013-09-20 14:49:00', 6.490371073168535e+32], ['validation-accuracy', '2013-09-20 14:50:00', 1.298074214633707e+33], ['accuracy', '2013-09-20 14:51:00', 2.596148429267414e+33], ['validation-accuracy', '2013-09-20 14:52:00', 5.192296858534828e+33], ['validation-accuracy', '2013-09-20 14:53:00', 1.0384593717069655e+34], ['validation-accuracy', '2013-09-20 14:54:00', 2.076918743413931e+34], ['validation-accuracy', '2013-09-20 14:55:00', 4.153837486827862e+34], ['validation-accuracy', '2013-09-20 14:56:00', 8.307674973655724e+34], ['accuracy', '2013-09-20 14:57:00', 1.661534994731145e+35], ['accuracy', '2013-09-20 14:58:00', 3.32306998946229e+35], ['validation-accuracy', '2013-09-20 14:59:00', 6.64613997892458e+35], ['validation-accuracy', '2013-09-20 15:00:00', 1.329227995784916e+36], ['validation-accuracy', '2013-09-20 15:01:00', 2.658455991569832e+36], ['validation-accuracy', '2013-09-20 15:02:00', 5.316911983139664e+36], ['accuracy', '2013-09-20 15:03:00', 1.0633823966279327e+37], ['validation-accuracy', '2013-09-20 15:04:00', 2.1267647932558654e+37], ['accuracy', '2013-09-20 15:05:00', 4.253529586511731e+37], ['accuracy', '2013-09-20 15:06:00', 8.507059173023462e+37], ['validation-accuracy', '2013-09-20 15:07:00', 1.7014118346046923e+38], ['validation-accuracy', '2013-09-20 15:08:00', 3.402823669209385e+38], ['accuracy', '2013-09-20 15:09:00', 6.80564733841877e+38], ['validation-accuracy', '2013-09-20 15:10:00', 1.361129467683754e+39], ['validation-accuracy', '2013-09-20 15:11:00', 2.722258935367508e+39], ['accuracy', '2013-09-20 15:12:00', 5.444517870735016e+39], ['accuracy', '2013-09-20 15:13:00', 1.0889035741470031e+40], ['validation-accuracy', '2013-09-20 15:14:00', 2.1778071482940062e+40], ['accuracy', '2013-09-20 15:15:00', 4.3556142965880123e+40], ['validation-accuracy', '2013-09-20 15:16:00', 8.711228593176025e+40], ['validation-accuracy', '2013-09-20 15:17:00', 1.742245718635205e+41], ['validation-accuracy', '2013-09-20 15:18:00', 3.48449143727041e+41], ['accuracy', '2013-09-20 15:19:00', 6.96898287454082e+41], ['accuracy', '2013-09-20 15:20:00', 1.393796574908164e+42], ['validation-accuracy', '2013-09-20 15:21:00', 2.787593149816328e+42], ['validation-accuracy', '2013-09-20 15:22:00', 5.575186299632656e+42], ['accuracy', '2013-09-20 15:23:00', 1.1150372599265312e+43], ['validation-accuracy', '2013-09-20 15:24:00', 2.2300745198530623e+43], ['accuracy', '2013-09-20 15:25:00', 4.460149039706125e+43], ['validation-accuracy', '2013-09-20 15:26:00', 8.92029807941225e+43], ['accuracy', '2013-09-20 15:27:00', 1.78405961588245e+44], ['accuracy', '2013-09-20 15:28:00', 3.5681192317649e+44], ['validation-accuracy', '2013-09-20 15:29:00', 7.1362384635298e+44], ['accuracy', '2013-09-20 15:30:00', 1.42724769270596e+45], ['accuracy', '2013-09-20 15:31:00', 2.85449538541192e+45], ['validation-accuracy', '2013-09-20 15:32:00', 5.70899077082384e+45], ['accuracy', '2013-09-20 15:33:00', 1.141798154164768e+46], ['accuracy', '2013-09-20 15:34:00', 2.283596308329536e+46], ['validation-accuracy', '2013-09-20 15:35:00', 4.567192616659072e+46], ['accuracy', '2013-09-20 15:36:00', 9.134385233318143e+46], ['accuracy', '2013-09-20 15:37:00', 1.8268770466636286e+47], ['validation-accuracy', '2013-09-20 15:38:00', 3.6537540933272573e+47], ['validation-accuracy', '2013-09-20 15:39:00', 7.307508186654515e+47], ['accuracy', '2013-09-20 15:40:00', 1.461501637330903e+48], ['validation-accuracy', '2013-09-20 15:41:00', 2.923003274661806e+48], ['validation-accuracy', '2013-09-20 15:42:00', 5.846006549323612e+48], ['accuracy', '2013-09-20 15:43:00', 1.1692013098647223e+49], ['accuracy', '2013-09-20 15:44:00', 2.3384026197294447e+49], ['validation-accuracy', '2013-09-20 15:45:00', 4.6768052394588893e+49], ['accuracy', '2013-09-20 15:46:00', 9.353610478917779e+49], ['accuracy', '2013-09-20 15:47:00', 1.8707220957835557e+50], ['accuracy', '2013-09-20 15:48:00', 3.7414441915671115e+50], ['accuracy', '2013-09-20 15:49:00', 7.482888383134223e+50], ['validation-accuracy', '2013-09-20 15:50:00', 1.4965776766268446e+51], ['accuracy', '2013-09-20 15:51:00', 2.9931553532536892e+51], ['accuracy', '2013-09-20 15:52:00', 5.986310706507379e+51], ['accuracy', '2013-09-20 15:53:00', 1.1972621413014757e+52], ['validation-accuracy', '2013-09-20 15:54:00', 2.3945242826029513e+52], ['accuracy', '2013-09-20 15:55:00', 4.789048565205903e+52], ['accuracy', '2013-09-20 15:56:00', 9.578097130411805e+52], ['accuracy', '2013-09-20 15:57:00', 1.915619426082361e+53], ['validation-accuracy', '2013-09-20 15:58:00', 3.831238852164722e+53], ['accuracy', '2013-09-20 15:59:00', 7.662477704329444e+53], ['validation-accuracy', '2013-09-20 16:00:00', 1.532495540865889e+54], ['validation-accuracy', '2013-09-20 16:01:00', 3.064991081731778e+54], ['validation-accuracy', '2013-09-20 16:02:00', 6.129982163463556e+54], ['validation-accuracy', '2013-09-20 16:03:00', 1.2259964326927111e+55], ['accuracy', '2013-09-20 16:04:00', 2.4519928653854222e+55], ['validation-accuracy', '2013-09-20 16:05:00', 4.9039857307708443e+55], ['validation-accuracy', '2013-09-20 16:06:00', 9.807971461541689e+55], ['validation-accuracy', '2013-09-20 16:07:00', 1.9615942923083377e+56], ['validation-accuracy', '2013-09-20 16:08:00', 3.9231885846166755e+56], ['accuracy', '2013-09-20 16:09:00', 7.846377169233351e+56], ['validation-accuracy', '2013-09-20 16:10:00', 1.5692754338466702e+57], ['validation-accuracy', '2013-09-20 16:11:00', 3.1385508676933404e+57], ['validation-accuracy', '2013-09-20 16:12:00', 6.277101735386681e+57], ['accuracy', '2013-09-20 16:13:00', 1.2554203470773362e+58], ['validation-accuracy', '2013-09-20 16:14:00', 2.5108406941546723e+58], ['validation-accuracy', '2013-09-20 16:15:00', 5.021681388309345e+58], ['accuracy', '2013-09-20 16:16:00', 1.004336277661869e+59], ['accuracy', '2013-09-20 16:17:00', 2.008672555323738e+59], ['accuracy', '2013-09-20 16:18:00', 4.017345110647476e+59], ['validation-accuracy', '2013-09-20 16:19:00', 8.034690221294951e+59]],
    dialogOpen: false,
    loading: false,
};

const hpMonitorReducer = (state = initialState, action) => {
    switch (action.type) {
        case actions.FILTER_JOBS:
            const jobs = state.jobsList.slice();
            const newList = jobs.filter(job => job.name.includes(action.filter));

            const avTypes = Object.assign({}, state.filterType);
            var typeKeys = Object.keys(avTypes);

            var avFilters = typeKeys.filter((key) => {
                return avTypes[key]
            });

            const filteredJobs = newList.filter(job => avFilters.includes(job.status));

            return {
                ...state,
                filteredJobsList: filteredJobs,
                filter: action.filter,
            }
        case actions.CHANGE_TYPE:
            const types = Object.assign({}, state.filterType)
            types[action.filter] = action.checked;
            var keys = Object.keys(types);

            var filters = keys.filter((key) => {
                return types[key]
            });
            const jobsList = state.jobsList.slice();
            const filtered = jobsList.filter(job => filters.includes(job.status));
            
            return {
                ...state,
                filterType: types,
                filteredJobsList: filtered,
            }
        case actions.FETCH_HP_JOBS_SUCCESS:
            return {
                ...state,
                jobsList: action.jobs,
                filteredJobsList: action.jobs,
            }
        case actions.FETCH_JOB_INFO_REQUEST:
            return {
                ...state,
                loading: true,
            }
        case actions.FETCH_JOB_INFO_SUCCESS:
            return {
                ...state,
                jobData: action.jobData,
                loading: false,
            }
        case actions.FETCH_JOB_INFO_FAILURE:
            return {
                ...state,
                loading: false,
            }
        case actions.FETCH_WORKER_INFO_SUCCESS:
            return {
                ...state,
                workerData: action.workerData,
                dialogOpen: true,
            }
        case actions.CLOSE_DIALOG:
            return {
                ...state,
                dialogOpen: false,
            }
        case actions.OPEN_FAKE:
            return {
                ...state, 
                dialogOpen: true,
            }
        default:
            return state;
    }
};

export default hpMonitorReducer;